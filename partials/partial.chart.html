<div id="controlChart">
	<script>

function init() {
	var height = 500,
    	width = 900;

    let	padding = 50;

    let defaultCircleRadius = 5;

    let controlChart = 	d3.select("#controlChart")
	                    .append('svg')
	                    .attr('height', height + padding * 2 )
	                    .attr('width', width + padding * 2)
	                    .append('g')
	                    .attr('id', 'control')
	                    .attr('transform', 
	                      'translate(' + padding + ',' + padding + ')');

    let xScale = d3.scaleLinear()
                          .range([0, width]);

    let yScale = d3.scaleLinear()
                          .range([height, 0]);

    let xAxis = d3.axisBottom()
    	.scale(xScale)
    	.ticks(10);

    let yAxis = d3.axisLeft()
    	.scale(yScale)
    	.ticks(10);

	controlChart.append("text")
		.attr("class", "x label")
		.attr("text-anchor", "end")
		.attr("x", width)
		.attr("y", height + 35)
		.text("Term Frequency");

    controlChart.append("text")
	    .attr("class", "y label")
	    .attr("text-anchor", "end")
	    .attr("y", -40)
	    .attr("dy", ".75em")
	    .attr("transform", "rotate(-90)")
	    .text("Inverse Document Frequency");

   d3.json(`https://lemma-6aeab.firebaseio.com/-Kfg0NSkaOAosOWnRUl6.json`, function(error, data) {
		console.log("data", data);
		yDomain = d3.extent(data, function(element){
		return element.inverseDocumentFrequency;
		});

		xDomain = d3.extent(data, function(element) {
		return element.termFrequency;
		});

		yScale.domain(yDomain);
		xScale.domain(xDomain);

		controlChart.append("g")
	        .attr("class", "x axis")
	        .attr("transform", "translate(0," + height + ")")
	        .call(xAxis);      

		controlChart.append("g")
			.attr("class", "y axis")
			.call(yAxis);

		dots = controlChart.selectAll('g.dots')
				.data(data)
				.enter()
				.append('g')
				.attr('class', 'dots')
				.attr("x", function(d, i) {
			   		return xScale(d.termFrequency);
			   })
			   .attr("y", function(d) {
			   		return height - yScale(d.inverseDocumentFrequency);
			   });

		dots.attr('transform', function(d) {
			x = xScale(d.termFrequency)
			y = yScale(d.inverseDocumentFrequency)
			return 'translate(' + x + ',' + y + ')'
			})
			.style('stroke', '#000')
			.style('fill', 'grey');

		dots.append('circle')
			.attr('r', 5);

		dots.on("mouseover", function(d) {
			d3.select(this).select('circle').attr('r', 10).style('fill', 'blue');

			d3.select("#tooltip")
			  .select("#document")
			  .text(d.document);
			  
			d3.select("#tooltip")
			  .select("#word")
			  .text(d.word);

			d3.select("#tooltip")
			  .select("#tfIdf")
			  .text((d.tfIdf).toFixed(4));

			d3.select(".tooltipWord").classed("hidden", false);
			d3.select(".tooltipDocument").classed("hidden", false);
			d3.select(".tooltipTfIdf").classed("hidden", false);
		});

		dots.on("mouseout", function() {
			d3.select(this).select('circle').attr('r',5).style('fill', 'grey');
			d3.select(".tooltipWord").classed("hidden", true);
		});

    });
}

init();

	</script>
	<div id="tooltip">
		<div>
	        <h4>Lexical Data</h4>
	        <p>Term: <span id="word" class="tooltipWord hidden"></span><p>
	        <p>Document: <span id="document" class="tooltipDocument hidden"></span><p>
	        <p>tf-idf: <span id="tfIdf" class="tooltipTfIdf hidden"></span></p>
	</div>
</div>